---
title: "Study Case - Bellabet Product Analysis"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.path='Figs/')

```

## Introduction

Bellabeat is a small company that have the potential to become a bigger player in smart health device market. Urska Srsen as co-founder believes that analyzing data more smart devices can unlock new growth by gaining insight into how consumers use smart devices.The insight will help marketing departement.

## Phase 1: Ask

To help Bellabeat, data analyst will find trends of how customers use non Bellabeat smart devices then apply those insights to Bellabeat product. This process also will tell how can this trends insight help Bellabeat marketing strategy.

**Key Objective**: Finding user trend pattern of smart device usage.

## Phase 2: Prepare

To analyze this problem, we will need non Bellabeat smart device user usage. In this case we will use [FitBit Smart Device Data.](https://www.kaggle.com/datasets/arashnic/fitbit)

**The Credibility and Privacy of The Data**: This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.

**Sort and Filter**: In this case, we will not use all of the data, but we will only find insights from sleep and activity data.

```{r}
daily_step <- read.csv("dailySteps_merged.csv")
daily_sleep <- read.csv("sleepDay_merged.csv")
daily_act <- read.csv("dailyActivity_merged.csv")

```

## Phase 3: Process

**Tools needed**: In this phase, we will determine and install libraries that will be used.

```{r installing libs}
library(tidyverse)
```

**Data Preview and Cleansing:**

```{r data preview}
str(daily_act)
str(daily_sleep)
str(daily_step)
```

Here at data preview, we find out that *data_act* actually contains a lot of data like TotalSteps, Activities and so on. We don't really need the other. We only need to merge the missing data like sleep time.

Before doing the merge, we will check if the data has structural errors like columns that need to be renamed, missing values and wrong data types.

```{r check data}
head(daily_act)
head(daily_sleep)

```

Based on the data preview, we see that the column names are normal, so we do not need to change their names.

To get more understanding about the data, we will check how many unique user that input their data.

```{r unique user}
n_distinct(daily_act$Id)
n_distinct(daily_sleep$Id)
```

Those distinct values show us that there are 33 unique user who participate the survey. The 24 unique value from sleep data might indicate that there were some people who did not input their sleep data. We will fix it at merge process later.

The next step is finding missing values.

```{r missing values}
sum(is.na(daily_act))
sum(is.na(daily_sleep))
```

**Data Transformation**

We also find that there is data type difference between SleepDay (sleep data) and ActivityDate (daily activity data). So we need to make the same format for date data type, in this case we will use MM/DD/YYYY

```{r}
head(daily_sleep$SleepDay)
head(daily_act$ActivityDate)
```

```{r changing data types format}
daily_sleep$SleepDay <- as.Date(daily_sleep$SleepDay, format = "%m/%d/%Y")
head(daily_sleep$SleepDay)
daily_act$ActivityDate <- as.Date(daily_act$ActivityDate, format = "%m/%d/%Y")
head(daily_act$ActivityDate)
```

```{r}
str(daily_sleep$SleepDay)
str(daily_act$ActivityDate)
```

## **Phase 4: Analyzing**

The next step is to merge data so we can analyze it more easier and effective.

```{r renamerging data, making new dataframe. also renaming date columns}
daily_act <- rename(daily_act, "date"= "ActivityDate")
daily_sleep <- rename(daily_sleep, "date"= "SleepDay")
```

```{r }
data <- merge(x = daily_act, y = daily_sleep, by=c("Id", "date"))
```

```{r}
```

```{r}
data_without_id <- data %>% select(TotalSteps, TotalDistance, Calories, TotalMinutesAsleep, TotalTimeInBed, VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes, SedentaryMinutes)
head(data)
```

```{r}
str(data_without_id)
```

To gain more insights for each variables correlation, we will need a correlation visualization.

```{r}
library(corrplot)
```

```{r}
M = cor(data_without_id)
corrplot(M, method = 'shade', diag = FALSE)   
```

Based on the correlation visual, we see that there are some data that have correlation. Here is what we will focus on:

-   SedentaryMinutes vs TotalMinutesAsleep

-   Calories Burned vs TotalSteps

We also want to see:

-   The difference between bed time and sleep time

-   Calories Burned distribution per Activity Types

**Making Visualization**

```{r sedentary vs total minutes asleep}
library(ggplot2)

ggplot(data, aes(x=SedentaryMinutes, y=TotalMinutesAsleep)) +
  geom_point() +
  stat_smooth(method=loess) +
  theme_minimal() + 
  labs(title="Correlation Between Sleep Minutes and Sedentary Minutes") +
  # move the title text to the middle
  theme(plot.title=element_text(hjust=0.5))

```

Based on the viz, we see that there is correlation between sleep minutes and sedentary activity minutes. In this case, the more user got sedentary activities in minutes, the less they sleep. The less sleep might indicate bad sleep for user because based on Sleep Foundation Organization, adults need to sleep 7-9 hours or 420 - 540 minutes. [Sleep Foundation Recommendation](https://www.sleepfoundation.org/how-sleep-works/how-much-sleep-do-we-really-need)

```{r calories burned vs total steps}
ggplot(data, aes(x = Calories, y = TotalSteps)) +geom_point() +
  stat_smooth(method=loess) +
  theme_minimal() + 
  labs(title="Correlation Between Calories Burned and Steps") +
  # move the title text to the middle
  theme(plot.title=element_text(hjust=0.5))
  
  

```

Based on the viz, we see that the more steps user did, the more calories burned. This is correct because every step human do needs calories to burn [(Source)](https://www.healthhub.sg/live-healthy/1523/power-hawker-diet-to-match-your-10000-steps). In the fitness industry, calories usually correlate with weight loss, so Bellabeat can notify user to do more steps if they got weight loss goal.

```{r total minutes asleep vs in bed}
library(dplyr)
sleep_data <- data %>% select(TotalMinutesAsleep, TotalTimeInBed)
sleep_data <- mutate(sleep_data, MinutesDiff = TotalTimeInBed - TotalMinutesAsleep)
head(sleep_data)
```

```{r average}
print(paste("Average Different Times Between In Bed and Asleep =", round(mean(sleep_data$MinutesDiff)), "minutes"))

```

Average time user spends time In Bed without Asleep is 39 minutes. This data indicates that Time In Bed is not the same as Time A Sleep. User need to know this so they can reorganize their "sleep" schedule.

```{r making user type distribution data based on their steps count}
#We will try to categorize data based on  steps. We will count based on: <5k steps, 5k-10k and >10k

data %>% 
  summarise(
    steps_category = factor(case_when
                            (
                              TotalSteps < 5000 ~ "less than 5k steps",
                              TotalSteps >= 5000 & TotalSteps <= 10000 ~ "5k-10k steps",
                              TotalSteps > 10000 ~ "more than 10k steps"
                            ), levels = c("more than 10k steps", "5k-10k steps", "less than 5k steps")), Id 
) %>%
  ggplot(aes(steps_category, , fill = steps_category)) +
  geom_bar() +
  labs(title = "Data Input Based On Step Distribution") +
  theme(plot.title=element_text(hjust=0.5))
  
  
```

Based on the data we receive, we see that people actually did \> 10k steps more than the sedentary steps (\<5k steps). With this data, we can motivate user to do more steps.

## Phase 5: Share and Act

From the analysis and visualization above, data analyst can recommend some ideas for marketing strategy. Here is the recommendation:

-   Bellabeat can make a content that tells user that Time In Bed is different with Time Asleep. Bellabeat can pursue user to use Bellabeat smart device to remind and organize the sleep schedule so user can get a good sleep (7-9 hours).

-   Bellabeat users need to know that a good quality sleep is depends on their activities. Data shows that the more sedentary minutes the less sleep they got. Bellabeat can give them reminder to do some activities.

-   User that has a weight lose goal and use the calories burned as their metric can be benefited. There is strong correlation between step count and calories burned. User can be notified to do more step so they can burn more calories.

-   Based on Fitbit data, we see that people actually did \> 10k steps. This data can be a valuable content for Marketing Team to motivate users to do more steps and tells them that 10k steps can be done. Users need to do more steps because research done by The George Institute for Global Health back in 2015 suggest that upping daily step count to 10,000 could have a huge impact on health.

## Final: Thank You!

Thank you for your time to read this analysis. Hope this notebook can help you gain more understanding about R Programming and basic data analysis.

This is my first project with R. Suggestion, critics and recommendation are welcome.

![](https://media.giphy.com/media/Rx8H5yTo36LLy/giphy.gif)
